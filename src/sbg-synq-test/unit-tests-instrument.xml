<?xml version="1.0" encoding="UTF-8"?>
<tests versie="0.98"
xmlns:sbggz="http://sbggz.nl/schema/import/5.0.1" 
xmlns:sbgi="http://sbg-synq.nl/sbg-instrument"
>
  <description label="instrument">instrument functies</description>
  <setup>
    <sbg-instrumenten>

      <instrument code="TEST" aantal-vragen="10" typeRespondent="01">
	<naam>sbg-synq test instrument</naam>
	<schaal min="10" max="50" code="TOT">
	  <items all="true">1 tot 10</items>
	  <berekening functie="sum">som</berekening>
	</schaal>
      </instrument>

      <instrument code="TEST-O" aantal-vragen="10" typeRespondent="01">
	<naam>sbg-synq test instrument: omscoren</naam>
	<schaal min="10" max="50" code="TOT">
	  <items all="true">1 tot 10</items>
	  <omscoren min="1" max="5">7, 8</omscoren>
	  <berekening functie="sum">som</berekening>
	</schaal>
      </instrument>


      <instrument code="TEST-S" aantal-vragen="10" typeRespondent="01">
	<naam>sbg-synq test instrument: item-selectie</naam>
	<schaal min="10" max="50" code="TOT">
	  <items>4, 5, 6, 7, 8</items>
	  <berekening functie="sum">som</berekening>
	</schaal>
      </instrument>

      <instrument code="MANSA" aantal-vragen="16">
	<schaal code="TOT" min="12" max="84" definitie="sbg">
	  <items>1, 2, 3, 4, 5, 6, 8, 12, 13, 14, 15, 16</items>
	  <berekening functie="sum">Sommatie van de betreffende items
	  </berekening>
	</schaal>
      </instrument>

      <instrument code="BSI" aantal-vragen="53" typeRespondent="01">
	<naam>BSI Brief Symptom Inventory</naam>
	<schaal min="0" max="4" code="TOT" definitie="sbg">
	  <items all="true">1 tot 53</items>
	  <berekening functie="avg">
	    Gemiddelde van alle items
	  </berekening>
	</schaal>
      </instrument>

      <instrument code="OQ45-sd" aantal-vragen="45">
	<naam>OQ-45 Outcome Questionaire</naam>
	<schaal min="0" max="100" code="SD">
	  <items>2, 3, 5, 6, 8, 9, 10, 11, 13 , 15, 22, 23, 24 , 25, 27, 29,
	  31 , 33, 34, 35, 36, 40, 41, 42, 45
	  </items>
	  <omscoren min="0" max="4">13,24,31</omscoren>
	  <berekening functie="sum">Sommatie van de betreffende items
	  </berekening>
	</schaal>
      </instrument>
      <instrument code="SCL90">
	<naam>SCL-90 Symptom CheckList</naam>
	<schaal min="0" max="999" code="TOT">
	  <items>1 tot 90</items>
	  <berekening>Sommatie van alle items</berekening>
	</schaal>
      </instrument>
    </sbg-instrumenten>

    <metingen>
      <Meting datum="2012-02-29" meting-id="meting-1">
	<Item itemnummer="1" score="1"/>
	<Item itemnummer="2" score="1"/>
	<Item itemnummer="3" score="1"/>
	<Item itemnummer="4" score="1"/>
	<Item itemnummer="5" score="1"/>
	<Item itemnummer="6" score="1"/>
	<Item itemnummer="7" score="1"/>
	<Item itemnummer="8" score="1"/>
	<Item itemnummer="9" score="1"/>
	<Item itemnummer="10" score="1"/>
      </Meting>

      <Meting datum="2012-02-29" meting-id="meting-2">
	<Item itemnummer="1" score="1"/>
	<Item itemnummer="2" score="1"/>
	<Item itemnummer="3" score="1"/>
	<Item itemnummer="4" score="1"/>
	<Item itemnummer="5" score="1"/>
	<Item itemnummer="6" score="1"/>
	<Item itemnummer="7" score="5"/>
	<Item itemnummer="8" score="5"/>
	<Item itemnummer="9" score="1"/>
	<Item itemnummer="10" score="1"/>
      </Meting>


      <Meting datum="2012-02-29" meting-id="meting-3">
	<Item itemnummer="1" score="0"/>
	<Item itemnummer="2" score="1"/>
	<Item itemnummer="3" score="2"/>
	<Item itemnummer="4" score="3.0"/>
	<Item itemnummer="5" score="4"/>
	<Item itemnummer="6" score="5"/>
	<Item itemnummer="7" score="6"/>
	<Item itemnummer="8" score="7"/>
	<Item itemnummer="9" score="8"/>
	<Item itemnummer="10" score="9"/>
      </Meting>

    </metingen>
  </setup>

  <group >
    <function>sbgi:bereken-score</function>
    <description>bereken totaalscore adhv item-scores</description>

    <test name="TEST minimum itemscore" code="score-1">
      <setup>
	<Meting ref="true" meting-id="meting-1"/>
	<instrument ref="true" code="TEST"/>
      </setup>
      <expected><value>10</value></expected>
    </test>

    <test name="TEST minimum totaalscore" code="score-2">
      <setup>
	<Meting ref="true" meting-id="meting-2"/>
	<instrument ref="true" code="TEST"/>
      </setup>
      <expected><value>18</value></expected>
    </test>


    <test name="TEST-O minimum itemscore" code="score-3">
      <setup>
	<Meting ref="true" meting-id="meting-1"/>
	<instrument ref="true" code="TEST-O"/>
      </setup>
      <expected><value>18</value></expected>
    </test>
    <test name="TEST-O minimum totaalscore" code="score-4">
      <setup>
	<Meting ref="true" meting-id="meting-2"/>
	<instrument ref="true" code="TEST-O"/>
      </setup>
      <expected><value>10</value></expected>
    </test>

  </group>



  <group >
    <function>sbgi:item-scores</function>
    <description>selecteer items voor score</description>

    <test name="TEST selecteer alle item-scores" code="score-5">
      <setup>
	<Meting ref="true" meting-id="meting-1"/>
	<instrument ref="true" code="TEST"/>
      </setup>
      <expected><value>1, 1, 1, 1, 1, 1, 1, 1, 1, 1</value></expected>
    </test>

    <test name="TEST-S selecteer item-scores" code="score-6">
      <setup>
	<Meting ref="true" meting-id="meting-3"/>
	<instrument ref="true" code="TEST-S"/>
      </setup>
      <expected><value>3, 4, 5, 6, 7</value></expected>
    </test>

  </group>


</tests>